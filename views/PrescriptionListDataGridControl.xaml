<UserControl x:Class="nnunet_client.views.PrescriptionListDataGridControl"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
			 mc:Ignorable="d" 
			 d:DesignHeight="400" d:DesignWidth="300">
    <UserControl.Resources>
        <Style x:Key="RowTextBlockStyle" TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Padding" Value="5,0"/>
        </Style>

        <Style x:Key="RowTextBoxStyle" TargetType="{x:Type TextBox}">
            <Setter Property="VerticalAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="5,0"/>
        </Style>

        <Style x:Key="ToolBarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Width" Value="20"/>
            <Setter Property="Height" Value="20"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0"/>
        </Style>

        <Style x:Key="ToolBarIconStyle" TargetType="{x:Type iconPacks:PackIconMaterial}">
            <Setter Property="Width" Value="10"/>
            <Setter Property="Height" Value="10"/>
        </Style>

    </UserControl.Resources>
    <Grid MinHeight="70">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <DataGrid Grid.Row="0"
				  ItemsSource="{Binding Prescriptions}"
				  SelectedItem="{Binding SelectedPrescription}"
				  AutoGenerateColumns="False"
				  CanUserAddRows="False"
                  Margin="0">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID"
									Binding="{Binding Id, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
									Width="*"
                                    ElementStyle="{StaticResource RowTextBlockStyle}"
                                    EditingElementStyle="{StaticResource RowTextBoxStyle}"
                                    />
                <DataGridTextColumn Header="Total Dose (cGy)"
									Binding="{Binding TotalDose, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
									Width="*"
                                    ElementStyle="{StaticResource RowTextBlockStyle}"
                                    EditingElementStyle="{StaticResource RowTextBoxStyle}"

                                    />
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="1" Orientation="Vertical" Margin="0">
            <Grid Margin="0" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Content="ID:" Grid.Column="0" VerticalAlignment="Center"/>
                <TextBox Text="{Binding SelectedPrescription.Id, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
						 Grid.Column="1" Margin="0"/>

                <Label Content="Total Dose (cGy):" Grid.Column="2" VerticalAlignment="Center"/>
                <TextBox Text="{Binding SelectedPrescription.TotalDose, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
						 Grid.Column="3" Margin="0"/>
            </Grid>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0">
                <Button ToolTip="Add"
						Command="{Binding AddCommand}"
						Style="{StaticResource ToolBarButtonStyle}"
                        >
                    <iconPacks:PackIconMaterial Kind="Plus" Style="{StaticResource ToolBarIconStyle}"/>
                </Button>
                <Button ToolTip="Remove"
						Command="{Binding RemoveCommand}"
                        Style="{StaticResource ToolBarButtonStyle}"
						>
                    <iconPacks:PackIconMaterial Kind="Minus" Style="{StaticResource ToolBarIconStyle}" />
                </Button>
                <Button ToolTip="Duplicate"
					Command="{Binding DuplicateCommand}"
                        Style="{StaticResource ToolBarButtonStyle}"
					>
                        <iconPacks:PackIconMaterial Kind="ContentDuplicate" Style="{StaticResource ToolBarIconStyle}"/>
                </Button>
                <Button ToolTip="Save"
		                Command="{Binding SaveCommand}"
                        Style="{StaticResource ToolBarButtonStyle}"
                        Visibility="{Binding SaveLoadButtonsVisibility}"
                        >
                            <iconPacks:PackIconMaterial Kind="ContentSave" Style="{StaticResource ToolBarIconStyle}"/>
                </Button>
                <Button ToolTip="Load"
		                 Command="{Binding LoadCommand}"
                        Style="{StaticResource ToolBarButtonStyle}"  
                        Visibility="{Binding SaveLoadButtonsVisibility}"
		                
                        >
                                <iconPacks:PackIconMaterial Kind="FolderOpen" Style="{StaticResource ToolBarIconStyle}"/>
                </Button>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>